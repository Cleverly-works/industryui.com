{"version":3,"sources":["../../../components/organisms/register/register.js"],"names":["React","useContext","useState","useEffect","any","bool","func","string","useForm","Alert","Button","CheckboxField","DatePickerInput","Form","FormLabel","FormField","Link","Text","UserContext","styled","CHECKBOX_TERMS","id","label","Register","birthday","dayBirthday","email","errorSubmit","monthBirthday","marketing","nameFirst","nameLast","pathLogin","password","repeatPassword","showPlaceholder","submit","terms","yearBirthday","renderBirthday","registerContext","mode","errors","register","formState","handleSubmit","error","setError","passwordError","setPasswordError","onSubmit","e","Error","defaultOptions","message","isValid","StyledLink","div","propTypes","isRequired","defaultProps"],"mappings":"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","sourcesContent":["/**\n * Register\n */\n\n// React\nimport React, { useContext, useState, useEffect } from 'react'\nimport { any, bool, func, string } from 'prop-types'\n\n// React Hook Form\nimport { useForm } from 'react-hook-form'\n\n// UI\nimport {\n  Alert,\n  Button,\n  CheckboxField,\n  DatePickerInput,\n  Form,\n  FormLabel,\n  FormField,\n  Link,\n  Text,\n  UserContext\n} from '../../'\n\n// Style\nimport styled from 'styled-components'\n\nconst CHECKBOX_TERMS = [\n  {\n    id: 'terms',\n    label:\n      'I confirm that I have read and agree to the Terms of Service and Privacy Policy.'\n  },\n  {\n    id: 'marketing',\n    label: `I would like to receive, occasional news and exclusive offers from via email. I can opt\n      out of receiving these at any time in my account settings.`\n  }\n]\n\nexport const Register = ({\n  birthday,\n  dayBirthday,\n  email,\n  errorSubmit,\n  monthBirthday,\n  marketing,\n  nameFirst,\n  nameLast,\n  pathLogin,\n  password,\n  repeatPassword,\n  showPlaceholder,\n  submit,\n  terms,\n  yearBirthday\n}) => {\n  const renderBirthday = () => (\n    <>\n      <DatePickerInput\n        day={dayBirthday}\n        id=\"Birthday\"\n        label=\"Birthdate\"\n        month={monthBirthday}\n        year={yearBirthday}\n      />\n\n      <Text>\n        To sign up, you must be 18 or older. Other users will not see this.\n      </Text>\n    </>\n  )\n\n  const { registerContext } = useContext(UserContext)\n  const { errors, register, formState, handleSubmit } = useForm({\n    mode: 'onChange'\n  })\n\n  const [error, setError] = useState(errorSubmit)\n  const [passwordError, setPasswordError] = useState()\n\n  useEffect(() => {\n    setError(errorSubmit)\n\n    return () => {\n      setError()\n    }\n  }, [errorSubmit])\n\n  const onSubmit = (e) => {\n    setPasswordError()\n\n    if (e.password !== e.repeatPassword) {\n      setPasswordError(new Error('Password and repeat password are different'))\n    } else if (!submit) {\n      registerContext(\n        nameFirst,\n        nameLast,\n        email,\n        password,\n        marketing,\n        birthday,\n        (error) => error && setError(error)\n      )\n    } else {\n      submit()\n    }\n  }\n\n  const defaultOptions = {\n    errors: errors,\n    register: register\n  }\n\n  return (\n    <Form handleSubmit={handleSubmit(onSubmit)}>\n      {error && <Alert content={error.message} context=\"warning\" />}\n\n      <FormLabel label=\"First name\">\n        <FormField\n          {...defaultOptions}\n          autoFocus\n          name=\"nameFirst\"\n          placeholder={showPlaceholder ? 'Tommy' : ''}\n        />\n      </FormLabel>\n\n      <FormLabel label=\"Last name\">\n        <FormField\n          {...defaultOptions}\n          name=\"nameLast\"\n          placeholder={showPlaceholder ? 'Ryder' : ''}\n        />\n      </FormLabel>\n\n      <FormLabel label=\"Email\">\n        <FormField\n          {...defaultOptions}\n          autoFocus\n          name=\"email\"\n          placeholder={showPlaceholder ? 'Email' : ''}\n        />\n      </FormLabel>\n\n      <FormLabel label=\"Password\">\n        <FormField\n          {...defaultOptions}\n          name=\"password\"\n          placeholder={showPlaceholder ? 'Password' : ''}\n          type=\"password\"\n        />\n      </FormLabel>\n\n      <FormLabel label=\"Repeat Password\">\n        <FormField\n          {...defaultOptions}\n          name=\"repeatPassword\"\n          placeholder={showPlaceholder ? 'Password' : ''}\n          type=\"password\"\n        />\n      </FormLabel>\n\n      {birthday && renderBirthday()}\n\n      {passwordError && (\n        <Alert content={passwordError.message} context=\"warning\" />\n      )}\n\n      <CheckboxField {...defaultOptions} data={CHECKBOX_TERMS} stacked />\n\n      <Button\n        align=\"right\"\n        content=\"Sign up\"\n        context=\"primary\"\n        disabled={!formState.isValid}\n        size=\"lg\"\n        type=\"submit\"\n      />\n\n      <StyledLink>\n        Already have an account? <Link to={pathLogin}>Log in</Link>\n      </StyledLink>\n    </Form>\n  )\n}\n\nconst StyledLink = styled.div`\n  display: block;\n  margin: 1rem 0;\n`\n\nRegister.propTypes = {\n  birthday: bool,\n  dayBirthday: any,\n  email: string,\n  errorSubmit: bool,\n  marketing: bool,\n  monthBirthday: any,\n  nameFirst: string,\n  nameLast: string,\n  password: string,\n  pathLogin: string,\n  repeatPassword: string,\n  showPlaceholder: bool,\n  submit: func.isRequired,\n  terms: bool,\n  yearBirthday: any\n}\n\nRegister.defaultProps = {\n  birthday: false,\n  pathLogin: '/account/login'\n}\n"],"file":"register.js"}