{"version":3,"sources":["../../../components/form/richTextInput/richEditor.js"],"names":["React","useRef","object","string","ContentState","convertFromHTML","convertToRaw","EditorState","Controller","Editor","draftToHtml","styled","css","COMMON_INPUT_STYLES","ERROR_STYLE","RichTextInput","control","errors","initialValue","name","editor","content","createWithContent","createFromBlockArray","defaultValue","editorState","html","onEditorStateChange","onChange","getCurrentContent","current","focus","value","e","Wrapper","div","props","propTypes","isRequired"],"mappings":";;;;AAAA;AACA,OAAOA,KAAP,IAAgBC,MAAhB,QAA8B,OAA9B;AACA,SAASC,MAAT,EAAiBC,MAAjB,QAA+B,YAA/B;AAEA,SACEC,YADF,EAEEC,eAFF,EAGEC,YAHF,EAIEC,WAJF,QAKO,UALP;AAMA,SAASC,UAAT,QAA2B,iBAA3B;AACA,SAASC,MAAT,QAAuB,qBAAvB;AACA,OAAOC,WAAP,MAAwB,iBAAxB,C,CAEA;;AACA,OAAOC,MAAP,IAAiBC,GAAjB,QAA4B,mBAA5B;AACA,SAASC,mBAAT,EAA8BC,WAA9B,QAAiD,QAAjD;AAEA,OAAO,IAAMC,aAAa,GAAG,SAAhBA,aAAgB,OAA6C;AAAA;;AAAA,MAA1CC,OAA0C,QAA1CA,OAA0C;AAAA,MAAjCC,MAAiC,QAAjCA,MAAiC;AAAA,MAAzBC,YAAyB,QAAzBA,YAAyB;AAAA,MAAXC,IAAW,QAAXA,IAAW;AACxE,MAAMC,MAAM,GAAGnB,MAAM,CAAC,IAAD,CAArB;AACA,MAAMoB,OAAO,GAAGd,WAAW,CAACe,iBAAZ,CACdlB,YAAY,CAACmB,oBAAb,CAAkClB,eAAe,CAACa,YAAD,aAACA,YAAD,cAACA,YAAD,GAAiB,EAAjB,CAAjD,CADc,CAAhB;AAIA,MAAMM,YAAY,GAAG;AACnBC,IAAAA,WAAW,EAAEJ,OADM;AAEnBK,IAAAA,IAAI,EAAER,YAAF,aAAEA,YAAF,cAAEA,YAAF,GAAkB;AAFH,GAArB;;AAKA,MAAMS,oBAAmB,GAAG,SAAtBA,mBAAsB,CAACF,WAAD,EAAcG,QAAd,EAA2B;AACrD,QAAMF,IAAI,GAAGhB,WAAW,CAACJ,YAAY,CAACmB,WAAW,CAACI,iBAAZ,EAAD,CAAb,CAAxB;AACAD,IAAAA,QAAQ,CAAC;AAAEH,MAAAA,WAAW,EAAXA,WAAF;AAAeC,MAAAA,IAAI,EAAJA;AAAf,KAAD,CAAR;AACD,GAHD;;AAKA,sBACE,oBAAC,OAAD;AAAS,IAAA,MAAM,EAAET,MAAM,CAACE,IAAD,CAAvB;AAA+B,IAAA,OAAO,qBAAEC,MAAM,CAACU,OAAT,oDAAE,gBAAgBC,KAAhB;AAAxC,kBACE,oBAAC,UAAD;AACE,IAAA,IAAI,EAAEZ,IADR;AAEE,IAAA,OAAO,EAAEH,OAFX;AAGE,IAAA,YAAY,EAAEQ,YAHhB;AAIE,IAAA,MAAM,EAAE;AAAA,UAAGQ,KAAH,SAAGA,KAAH;AAAA,UAAUJ,QAAV,SAAUA,QAAV;AAAA,0BACN,oBAAC,MAAD;AACE,QAAA,WAAW,EAAEI,KAAK,CAACP,WADrB;AAEE,QAAA,gBAAgB,EAAC,eAFnB;AAGE,QAAA,eAAe,EAAC,cAHlB;AAIE,QAAA,mBAAmB,EAAE,6BAACQ,CAAD;AAAA,iBAAON,oBAAmB,CAACM,CAAD,EAAIL,QAAJ,CAA1B;AAAA;AAJvB,QADM;AAAA;AAJV,IADF,CADF;AAiBD,CAjCM;AAAMb,a;AAmCb,IAAMmB,OAAO,GAAGvB,MAAM,CAACwB,GAAV,wFACT,UAACC,KAAD;AAAA,SAAWvB,mBAAmB,CAACuB,KAAD,CAA9B;AAAA,CADS,EAET;AAAA,MAAGnB,MAAH,SAAGA,MAAH;AAAA,SACAA,MAAM,IACNL,GADM,0FAEF,UAACwB,KAAD;AAAA,WAAWtB,WAAW,CAACsB,KAAD,CAAtB;AAAA,GAFE,CADN;AAAA,CAFS,CAAb;AASArB,aAAa,CAACsB,SAAd,GAA0B;AACxBrB,EAAAA,OAAO,EAAEd,MAAM,CAACoC,UADQ;AAExBrB,EAAAA,MAAM,EAAEf,MAAM,CAACoC,UAFS;AAGxBnB,EAAAA,IAAI,EAAEhB,MAAM,CAACmC,UAHW;AAIxBpB,EAAAA,YAAY,EAAEf;AAJU,CAA1B","sourcesContent":["// React\nimport React, { useRef } from 'react'\nimport { object, string } from 'prop-types'\n\nimport {\n  ContentState,\n  convertFromHTML,\n  convertToRaw,\n  EditorState\n} from 'draft-js'\nimport { Controller } from 'react-hook-form'\nimport { Editor } from 'react-draft-wysiwyg'\nimport draftToHtml from 'draftjs-to-html'\n\n// UI\nimport styled, { css } from 'styled-components'\nimport { COMMON_INPUT_STYLES, ERROR_STYLE } from '../../'\n\nexport const RichTextInput = ({ control, errors, initialValue, name }) => {\n  const editor = useRef(null)\n  const content = EditorState.createWithContent(\n    ContentState.createFromBlockArray(convertFromHTML(initialValue ?? ''))\n  )\n\n  const defaultValue = {\n    editorState: content,\n    html: initialValue ?? ''\n  }\n\n  const onEditorStateChange = (editorState, onChange) => {\n    const html = draftToHtml(convertToRaw(editorState.getCurrentContent()))\n    onChange({ editorState, html })\n  }\n\n  return (\n    <Wrapper errors={errors[name]} onClick={editor.current?.focus()}>\n      <Controller\n        name={name}\n        control={control}\n        defaultValue={defaultValue}\n        render={({ value, onChange }) => (\n          <Editor\n            editorState={value.editorState}\n            wrapperClassName=\"wrapper-class\"\n            editorClassName=\"editor-class\"\n            onEditorStateChange={(e) => onEditorStateChange(e, onChange)}\n          />\n        )}\n      />\n    </Wrapper>\n  )\n}\n\nconst Wrapper = styled.div`\n  ${(props) => COMMON_INPUT_STYLES(props)}\n  ${({ errors }) =>\n    errors &&\n    css`\n      ${(props) => ERROR_STYLE(props)}\n    `}\n`\n\nRichTextInput.propTypes = {\n  control: object.isRequired,\n  errors: object.isRequired,\n  name: string.isRequired,\n  initialValue: string\n}\n"],"file":"richEditor.js"}