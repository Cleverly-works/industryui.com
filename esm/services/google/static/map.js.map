{"version":3,"sources":["../../../../components/services/google/static/map.js"],"names":["encodeCircle","StaticMap","apiKey","center","channel","client","format","language","location","maptype","markers","paths","region","rootURL","scale","signature","size","style","visible","zoom","property","value","separator","urlParts","push","urlBuilder","parts","filter","x","join","Array","isArray","arrParts","map","val","locationBuilder","encodeURI","lat","lng","circle","color","fillcolor","geodesic","points","weight","enc","latitude","longitude","radius","url","path","renderPath","length","marker","markerUrl","colour","label","markerColour","markerLabel","markerLocation","childrenUrlParts","renderParts","mainUrlParts","renderBaseMap","markerParts","renderMarkers"],"mappings":"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","sourcesContent":["/**\n * Google Static Map Service Class\n * Description: Generates an url for the static map\n *\n * @param {Array} Obj.paths\n * [{ color: '0x003753', geodesic: true, weight: '5', points: ['WC2E 9DD', 'SW1A']}]\n */\n\n// UI\nimport { encodeCircle } from './circle'\n\nexport class StaticMap {\n  constructor({\n    apiKey,\n    center,\n    channel,\n    client,\n    format = 'png',\n    language,\n    location = '',\n    maptype = 'roadmap',\n    markers = [],\n    paths = [],\n    region,\n    rootURL = 'https://maps.googleapis.com/maps/api/staticmap',\n    scale = 1,\n    signature,\n    size = '400x200',\n    style,\n    visible,\n    zoom = 15\n  }) {\n    this.apiKey = apiKey\n    this.channel = channel\n    this.center = center\n    this.client = client\n    this.format = format\n    this.language = language\n    this.location = location\n    this.maptype = maptype\n    this.markers = markers\n    this.paths = paths\n    this.region = region\n    this.rootURL = rootURL\n    this.scale = scale\n    this.signature = signature\n    this.size = size\n    this.style = style\n    this.visible = visible\n    this.zoom = zoom\n  }\n\n  urlBuilder(property, value, separator) {\n    if (value) {\n      return `${property}${separator}${value}`\n    }\n\n    return null\n  }\n\n  renderBaseMap() {\n    const urlParts = []\n    urlParts.push(this.urlBuilder('key', this.apiKey, '='))\n    urlParts.push(this.urlBuilder('center', this.center, '='))\n    urlParts.push(this.urlBuilder('channel', this.channel, '='))\n    urlParts.push(this.urlBuilder('client', this.client, '='))\n    urlParts.push(this.urlBuilder('format', this.format, '='))\n    urlParts.push(this.urlBuilder('language', this.language, '='))\n    urlParts.push(this.urlBuilder('maptype', this.maptype, '='))\n    urlParts.push(this.urlBuilder('region', this.region, '='))\n    urlParts.push(this.urlBuilder('scale', this.scale, '='))\n    urlParts.push(this.urlBuilder('signature', this.signature, '='))\n    urlParts.push(this.urlBuilder('size', this.size, '='))\n    urlParts.push(this.urlBuilder('style', this.style, '='))\n    urlParts.push(this.urlBuilder('visible', this.visible, '='))\n    urlParts.push(this.urlBuilder('zoom', this.zoom, '='))\n    const parts = urlParts.filter((x) => x).join('&')\n    return `${this.rootURL}?${parts}`\n  }\n\n  locationBuilder(location) {\n    const urlParts = []\n\n    if (Array.isArray(location)) {\n      const arrParts = location.map((val) => this.locationBuilder(val))\n      urlParts.push(...arrParts)\n    }\n\n    if (typeof location === 'string' || typeof location === 'number') {\n      urlParts.push(encodeURI(location))\n    }\n\n    if (typeof location === 'object' && location.lat && location.lng) {\n      urlParts.push(`${location.lat},${location.lng}`)\n    }\n\n    return urlParts.join('%7C')\n  }\n\n  // Create the URL segment for the Path\n  renderPath({ circle, color, fillcolor, geodesic, points, weight }) {\n    const urlParts = []\n\n    if (circle) {\n      const enc = encodeCircle(circle.latitude, circle.longitude, circle.radius)\n      urlParts.push(this.urlBuilder('', this.locationBuilder(`${enc}`), ''))\n    }\n\n    urlParts.push(this.urlBuilder('color', color, ':'))\n    urlParts.push(this.urlBuilder('weight', weight, ':'))\n    urlParts.push(this.urlBuilder('fillcolor', fillcolor, ':'))\n    urlParts.push(this.urlBuilder('geodesic', geodesic, ':'))\n    urlParts.push(this.urlBuilder('', this.locationBuilder(points), ''))\n\n    const url = urlParts.filter((x) => x).join('%7C')\n\n    return `path=${url}`\n  }\n\n  renderParts() {\n    return this.paths.map((path) => {\n      return this.renderPath(path)\n    })\n  }\n\n  renderMarkers() {\n    const { markers, locationBuilder, location } = this\n    let urlParts = {}\n\n    if (markers.length) {\n      urlParts = markers.map((marker) => {\n        let markerUrl = 'markers='\n        switch (typeof marker) {\n          case 'string': {\n            markerUrl += locationBuilder(marker)\n            break\n          }\n          case 'object': {\n            const { colour, label, location } = marker\n            const markerColour = colour && `color:${colour}|`\n            const markerLabel = label && `label:${label}|`\n            const markerLocation = location && `${locationBuilder(location)}|`\n            markerUrl += markerColour + markerLabel + markerLocation\n            break\n          }\n        }\n\n        return markerUrl\n      })\n    } else {\n      urlParts = [`markers=${locationBuilder(location)}`]\n    }\n\n    return urlParts.join('&')\n  }\n\n  generateUrl() {\n    const childrenUrlParts = this.renderParts() || []\n    const mainUrlParts = this.renderBaseMap()\n    const markerParts = this.renderMarkers()\n\n    const url = `${mainUrlParts}&${childrenUrlParts}&${markerParts}`\n    return url\n  }\n}\n"],"file":"map.js"}