{"version":3,"file":"richEditor-9e4adf4f.js","sources":["../../components/form/richTextInput/richEditor.js"],"sourcesContent":["// React\nimport { useRef } from 'react'\nimport { object, string } from 'prop-types'\n\nimport { ContentState, convertFromHTML, convertToRaw, EditorState } from 'draft-js'\nimport { Controller } from 'react-hook-form'\nimport { Editor } from 'react-draft-wysiwyg'\nimport draftToHtml from 'draftjs-to-html'\n\n// UI\nimport styled, { css } from 'styled-components'\nimport { COMMON_INPUT_STYLES, ERROR_STYLE } from 'components'\n\nexport const RichTextInput = ({ control, errors, initialValue, name }) => {\n  const editor = useRef(null)\n  const content = EditorState.createWithContent(\n    ContentState.createFromBlockArray(convertFromHTML(initialValue ?? ''))\n  )\n\n  const defaultValue = {\n    editorState: content,\n    html: initialValue ?? ''\n  }\n\n  const onEditorStateChange = (editorState, onChange) => {\n    const html = draftToHtml(convertToRaw(editorState.getCurrentContent()))\n    onChange({ editorState, html })\n  }\n\n  return (\n    <Wrapper errors={errors[name]} onClick={editor.current?.focus()}>\n      <Controller\n        name={name}\n        control={control}\n        defaultValue={defaultValue}\n        render={({ value, onChange }) => (\n          <Editor\n            editorState={value.editorState}\n            wrapperClassName='wrapper-class'\n            editorClassName='editor-class'\n            onEditorStateChange={e => onEditorStateChange(e, onChange)}\n          />\n        )}\n      />\n    </Wrapper>\n  )\n}\n\nconst Wrapper = styled.div`\n  ${props => COMMON_INPUT_STYLES(props)}\n  ${({ errors }) =>\n    errors &&\n    css`\n      ${props => ERROR_STYLE(props)}\n    `}\n`\n\nRichTextInput.propTypes = {\n  control: object.isRequired,\n  errors: object.isRequired,\n  name: string.isRequired,\n  initialValue: string\n}\n"],"names":["RichTextInput","control","errors","initialValue","name","editor","useRef","content","EditorState","createWithContent","ContentState","createFromBlockArray","convertFromHTML","defaultValue","editorState","html","onEditorStateChange","onChange","draftToHtml","convertToRaw","getCurrentContent","current","focus","value","e","Wrapper","styled","div","props","COMMON_INPUT_STYLES","css","ERROR_STYLE","propTypes","object","isRequired","string"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAaaA,aAAa,GAAG,SAAhBA,aAAgB,OAA6C;AAAA;;AAAA,MAA1CC,OAA0C,QAA1CA,OAA0C;AAAA,MAAjCC,MAAiC,QAAjCA,MAAiC;AAAA,MAAzBC,YAAyB,QAAzBA,YAAyB;AAAA,MAAXC,IAAW,QAAXA,IAAW;AACxE,MAAMC,MAAM,GAAGC,MAAM,CAAC,IAAD,CAArB;AACA,MAAMC,OAAO,GAAGC,WAAW,CAACC,iBAAZ,CACdC,YAAY,CAACC,oBAAb,CAAkCC,eAAe,CAACT,YAAD,aAACA,YAAD,cAACA,YAAD,GAAiB,EAAjB,CAAjD,CADc,CAAhB;AAIA,MAAMU,YAAY,GAAG;AACnBC,IAAAA,WAAW,EAAEP,OADM;AAEnBQ,IAAAA,IAAI,EAAEZ,YAAF,aAAEA,YAAF,cAAEA,YAAF,GAAkB;AAFH,GAArB;;AAKA,MAAMa,oBAAmB,GAAG,SAAtBA,mBAAsB,CAACF,WAAD,EAAcG,QAAd,EAA2B;AACrD,QAAMF,IAAI,GAAGG,WAAW,CAACC,YAAY,CAACL,WAAW,CAACM,iBAAZ,EAAD,CAAb,CAAxB;AACAH,IAAAA,QAAQ,CAAC;AAAEH,MAAAA,WAAW,EAAXA,WAAF;AAAeC,MAAAA,IAAI,EAAJA;AAAf,KAAD,CAAR;AACD,GAHD;;AAKA,SACE,MAAC,OAAD;AAAS,IAAA,MAAM,EAAEb,MAAM,CAACE,IAAD,CAAvB;AAA+B,IAAA,OAAO,qBAAEC,MAAM,CAACgB,OAAT,oDAAE,gBAAgBC,KAAhB;AAAxC,KACE,MAAC,UAAD;AACE,IAAA,IAAI,EAAElB,IADR;AAEE,IAAA,OAAO,EAAEH,OAFX;AAGE,IAAA,YAAY,EAAEY,YAHhB;AAIE,IAAA,MAAM,EAAE;AAAA,UAAGU,KAAH,SAAGA,KAAH;AAAA,UAAUN,QAAV,SAAUA,QAAV;AAAA,aACN,MAAC,MAAD;AACE,QAAA,WAAW,EAAEM,KAAK,CAACT,WADrB;AAEE,QAAA,gBAAgB,EAAC,eAFnB;AAGE,QAAA,eAAe,EAAC,cAHlB;AAIE,QAAA,mBAAmB,EAAE,6BAAAU,CAAC;AAAA,iBAAIR,oBAAmB,CAACQ,CAAD,EAAIP,QAAJ,CAAvB;AAAA;AAJxB,QADM;AAAA;AAJV,IADF,CADF;AAiBD;AAED,IAAMQ,OAAO,GAAGC,MAAM,CAACC,GAAV;AAAA;AAAA;AAAA,kBACT,UAAAC,KAAK;AAAA,SAAIC,mBAAmB,CAACD,KAAD,CAAvB;AAAA,CADI,EAET;AAAA,MAAG1B,MAAH,SAAGA,MAAH;AAAA,SACAA,MAAM,IACN4B,GADM,WAEF,UAAAF,KAAK;AAAA,WAAIG,WAAW,CAACH,KAAD,CAAf;AAAA,GAFH,CADN;AAAA,CAFS,CAAb;AASA5B,aAAa,CAACgC,SAAd,GAA0B;AACxB/B,EAAAA,OAAO,EAAEgC,gBAAM,CAACC,UADQ;AAExBhC,EAAAA,MAAM,EAAE+B,gBAAM,CAACC,UAFS;AAGxB9B,EAAAA,IAAI,EAAE+B,gBAAM,CAACD,UAHW;AAIxB/B,EAAAA,YAAY,EAAEgC;AAJU,CAA1B;;;;"}